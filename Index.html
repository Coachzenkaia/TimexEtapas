<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>TimexEtapas Power-Up</title>
    <link rel="stylesheet" href="https://p.trellocdn.com/power-up.min.css">
    <script src="https://p.trellocdn.com/power-up.min.js"></script>
  </head>
  <body>
    <script>
      window.TrelloPowerUp.initialize({
        'card-back-section': function(t, options) {
          return {
            title: 'Tiempo por Lista',
            icon: 'https://zingy-monstera-18f958.netlify.app/timex-icon.png',
            content: {
              type: 'iframe',
              url: t.signUrl('./card-back-section.html'),
              height: 250
            }
          };
        },
        'authorization-status': function(t) {
          return t.get('member', 'private', 'token').then(function(token) {
            return { authorized: !!token };
          });
        },
        'show-authorization': function(t) {
          return t.popup({
            title: 'Autorizar TimexEtapas',
            url: './auth.html',
            height: 140
          });
        },
        'card-buttons': function(t) {
          return [];
        },
        // Esto es lo nuevo y crítico:
        'card-badges': function(t) {
          return [];
        },
        'list-actions': function(t) {
          return [];
        }
      }, {
        // Esta parte indica qué datos queremos permitir usar en el iframe
        'card-back-section': {
          url: './card-back-section.html',
          args: {
            card: 'all',
            board: 'id',
            actions: 'all'
          }
        }
      });
    </script>
  </body>
</html>
